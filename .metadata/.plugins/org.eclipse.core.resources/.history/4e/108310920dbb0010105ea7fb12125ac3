// src/vista/FrmInicio.java
package vista;

import javax.swing.*;
import java.awt.*;
import java.util.LinkedHashMap;
import java.util.Map;

public class FrmInicio extends JFrame {

    public FrmInicio() {
        setTitle("Gestor de Clientes · HUB de ejercicios");
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setSize(720, 520);
        setLocationRelativeTo(null);

        // Título
        JLabel titulo = new JLabel("Tema 2 · Acceso a Datos · Aplicación Swing", SwingConstants.CENTER);
        titulo.setFont(titulo.getFont().deriveFont(Font.BOLD, 18f));
        titulo.setBorder(BorderFactory.createEmptyBorder(12, 12, 12, 12));

        // Contenedor principal con scroll (por si añades más secciones)
        JPanel content = new JPanel(new BorderLayout(10, 10));
        content.add(titulo, BorderLayout.NORTH);

        JPanel secciones = new JPanel();
        secciones.setLayout(new BoxLayout(secciones, BoxLayout.Y_AXIS));
        secciones.setBorder(BorderFactory.createEmptyBorder(8, 12, 12, 12));

        // ====== Sección 1.a (datos) ======
        secciones.add(crearSeccion(
                "1.a · Tabla 'datos' (tema2)",
                new String[][]{
                        {"Listar", "Abrirá el listado de 'datos' (8.a)"},
                        {"Alta / Modificación", "Abrirá el formulario de alta/modificación (3.a, 4.a, 6.a, 7.a)"},
                        {"Buscar", "Abrirá la búsqueda sobre 'datos' (9.a)"}
                },
                new Runnable[]{
                        () -> abrirPlaceholder("Listado 1.a", "Aquí abrirá FrmDatosListado"),
                        () -> abrirPlaceholder("Alta/Mod 1.a", "Aquí abrirá FrmDatosAltaMod"),
                        () -> abrirPlaceholder("Buscar 1.a", "Aquí abrirá FrmDatosBuscar")
                }
        ));

        // ====== Sección 1.b (empresa_clientes) ======
        secciones.add(crearSeccion(
                "1.b · Base de datos 'empresa_clientes' → CLIENTES",
                new String[][]{
                        {"Listar", "Listado de clientes (8.b)"},
                        {"Alta / Modificación", "Alta / modificar cliente (3.b, 4.b, 6.b, 7.b)"},
                        {"Buscar", "Búsqueda de clientes (9.b)"}
                },
                new Runnable[]{
                        () -> abrirPlaceholder("Clientes · Listado", "Aquí abrirá FrmClientesListado"),
                        () -> abrirPlaceholder("Clientes · Alta/Mod", "Aquí abrirá FrmClientesAltaMod"),
                        () -> abrirPlaceholder("Clientes · Buscar", "Aquí abrirá FrmClientesBuscar")
                }
        ));

        secciones.add(crearSeccion(
                "1.b · Base de datos 'empresa_clientes' → DIRECCIONES",
                new String[][]{
                        {"Listar", "Listado de direcciones (8.b)"},
                        {"Alta / Modificación", "Alta / modificar dirección (3.b, 4.b, 6.b, 7.b)"},
                        {"Buscar", "Búsqueda de direcciones (9.b)"}
                },
                new Runnable[]{
                        () -> abrirPlaceholder("Direcciones · Listado", "Aquí abrirá FrmDireccionesListado"),
                        () -> abrirPlaceholder("Direcciones · Alta/Mod", "Aquí abrirá FrmDireccionesAltaMod"),
                        () -> abrirPlaceholder("Direcciones · Buscar", "Aquí abrirá FrmDireccionesBuscar")
                }
        ));

        secciones.add(crearSeccion(
                "1.b · Base de datos 'empresa_clientes' → CONTACTOS",
                new String[][]{
                        {"Listar", "Listado de contactos (8.b)"},
                        {"Alta / Modificación", "Alta / modificar contacto (3.b, 4.b, 6.b, 7.b)"},
                        {"Buscar", "Búsqueda de contactos (9.b)"}
                },
                new Runnable[]{
                        () -> abrirPlaceholder("Contactos · Listado", "Aquí abrirá FrmContactosListado"),
                        () -> abrirPlaceholder("Contactos · Alta/Mod", "Aquí abrirá FrmContactosAltaMod"),
                        () -> abrirPlaceholder("Contactos · Buscar", "Aquí abrirá FrmContactosBuscar")
                }
        ));

        JScrollPane scroll = new JScrollPane(secciones);
        scroll.setBorder(null);
        content.add(scroll, BorderLayout.CENTER);

        // Pie con botones globales
        JPanel pie = new JPanel(new FlowLayout(FlowLayout.RIGHT, 10, 10));
        JButton btnAbout = new JButton("Acerca de");
        btnAbout.addActionListener(e -> JOptionPane.showMessageDialog(
                this,
                """
                Prácticas de Acceso a Datos (Swing + JDBC)
                - 1.a: 'datos' en BD 'tema2'
                - 1.b: 'empresa_clientes' (clientes, direcciones, contactos)
                """,
                "Acerca de", JOptionPane.INFORMATION_MESSAGE
        ));
        JButton btnSalir = new JButton("Salir");
        btnSalir.addActionListener(e -> dispose());
        pie.add(btnAbout);
        pie.add(btnSalir);
        content.add(pie, BorderLayout.SOUTH);

        setContentPane(content);
    }

    /** Crea un panel de sección con 3 botones horizontales y descripciones pequeñas. */
    private JPanel crearSeccion(String titulo, String[][] botones, Runnable[] acciones) {
        JPanel panel = new JPanel(new BorderLayout());
        panel.setBorder(BorderFactory.createCompoundBorder(
                BorderFactory.createEmptyBorder(8, 0, 8, 0),
                BorderFactory.createCompoundBorder(
                        BorderFactory.createLineBorder(new Color(210, 210, 210)),
                        BorderFactory.createEmptyBorder(10, 12, 10, 12)
                )
        ));

        JLabel lbl = new JLabel(titulo);
        lbl.setFont(lbl.getFont().deriveFont(Font.BOLD, 14f));
        panel.add(lbl, BorderLayout.NORTH);

        JPanel fila = new JPanel(new GridLayout(1, 3, 8, 8));
        for (int i = 0; i < botones.length; i++) {
            String texto = botones[i][0];
            String ayuda = botones[i][1];
            Runnable accion = acciones[i];

            JPanel celda = new JPanel(new BorderLayout(4, 4));
            JButton b = new JButton(texto);
            b.addActionListener(e -> accion.run());
            JLabel hint = new JLabel("<html><small>" + ayuda + "</small></html>");
            celda.add(b, BorderLayout.CENTER);
            celda.add(hint, BorderLayout.SOUTH);
            fila.add(celda);
        }
        panel.add(fila, BorderLayout.CENTER);
        return panel;
    }

    /** Muestra un diálogo temporal hasta que conectes el formulario real. */
    private void abrirPlaceholder(String titulo, String msg) {
        JOptionPane.showMessageDialog(this, msg, titulo, JOptionPane.INFORMATION_MESSAGE);
        // Cuando tengas el form real, reemplaza por algo como:
        // new clientes.FrmClientesListado(this).setVisible(true);
        // (si usas JDialog modal: new FrmX(this).setVisible(true);)
    }

    public static void main(String[] args) {
        // Nimbus (opcional)
        try {
            for (UIManager.LookAndFeelInfo info : UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (Exception ignored) {}

        SwingUtilities.invokeLater(() -> new FrmInicio().setVisible(true));
    }
}
